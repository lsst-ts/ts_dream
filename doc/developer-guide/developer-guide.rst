.. _Developer_Guide:

#####################
Dream Developer Guide
#####################

The CSC is a standard salobj CSC.
The communication with the DREAM hardware is written in Python using the ts_tcpip library.

.. _Dependencies:

Dependencies
============

These are the dependencies for the latest version of ts_dream:

* ts_xml - v9.0.0
* `SAL <https://ts-sal.lsst.io>`_ - v5.1.1
* ts_salobj - v6.4.1
* ts_idl - v3.1.3
* ts_tcpip - v0.3.0

.. _API:

Dream API
=========

The content in this section is autogenerated from docstrings.

.. automodapi:: lsst.ts.dream
    :no-main-docstr:
    :no-inheritance-diagram:


.. _Build:

Build and Test
==============

Assuming that the ``develop-env`` docker container is running.

.. prompt:: bash

    cd develop/ts_dream
    setup -kr .
    scons

An alternative

.. prompt:: bash

    cd develop/ts_dream
    pip install -e .[dev]
    pre-commit install # install black hook
    pytest --cov lsst.ts.dream -ra


.. _Usage:

Usage
=====

The CSC is started using the following python script located in the ``bin`` directory.

.. prompt:: bash

    python run_dream.py

.. _Simulator:

Simulator
=========

Both DREAM and ts_dream will have a simulator.
The simulators are intended to be used for testing purposes.
The DREAM simulator will be used to test the implementation of the commands sent by the CSC and for reception of the telemetry.
The ts_dream simulator will be used to test the implementation of reception of commands sent by the CSC and for sending telemetry.
Note that there is a circular dependency that the developers of DREAM and ts_dream need to keep in mind.

.. _Firmware:

Updating Firmware of the Dream
==============================

The firmware of DREAM is not a part of this project.
A link to user documentation for DREAM will be added as soon as it is available.

.. _Documentation:

Building the Documentation
==========================

.. prompt:: bash

    package-docs clean && package-docs build

.. _Contributing:

Contributing
============

Code and documentation contributions utilize pull-requests on github.
Feature requests can be made by filing a Jira ticket with the `ts_dream` label.
In all cases, reaching out to the :ref:`contacts for this CSC <ts_xml:index:master-csc-table:Dream>` is recommended.

